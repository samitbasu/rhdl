[{"Start":{"CodeBlock":{"Fenced":"rust"}}},{"Text":"//       ðŸ‘‡ namespace the raw constants in a module\npub mod error_codes {\n    use super::*;\n    pub const ALL_OK: b2 = b2(0);\n    pub const ENDPOINT_ERROR: b2 = b2(1);\n    pub const ADDRESS_ERROR: b2 = b2(2);\n    pub const RESERVED_ERROR: b2 = b2(3);\n}\n\n#[derive(Copy, Clone, PartialEq, Digital, Default)]\npub enum BusError { // ðŸ‘ˆ Create a RHDL enum for the variants\n    Endpoint,\n    Address,\n    #[default]\n    Reserved\n}\n\n#[kernel]\npub fn kernel(x: b2, data: b8) -> Result<b8, BusError> {\n    match x {\n        error_codes::ALL_OK => Ok(data),\n        error_codes::ENDPOINT_ERROR => Err(BusError::Endpoint),\n        error_codes::ADDRESS_ERROR => Err(BusError::Address),\n        error_codes::RESERVED_ERROR => Err(BusError::Reserved),\n        _ => Err(BusError::Reserved), // ðŸ‘ˆ unreachable but rustc doesn't know this    \n    }\n}\n"},{"End":"CodeBlock"}]