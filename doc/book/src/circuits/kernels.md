# Kernels

In the context of the `Circuit` trait, the compute kernel is specified in the `CircuitIO` trait.  Recall the `CircuitIO` trait

```rust
{{#rustdoc_include ../code/src/circuits/io.rs:circuit_io}}
```

The line of interest is this one:

```rust
{{#rustdoc_include ../code/src/circuits/kernels.rs:kernel-def}}
```

which in words says that the `Kernel` type satisfies the following constraints

- `Kernel : DigitalFn` - this means that that `Kernel` is a synthesizable function that has been decorated with the `#[kernel]` attribute.
- `Kernel` is the type of a function that has the signature `fn(I, Q) -> (O, D)`.

An example is helpful.  In the [Half Adder](../half_adder/summary.md) section, we build a half adder that looks like this:

```badascii
              +---------+         
a +---+------>|         |         
      |       | XorGate +--> sum  
      |  +--->|         |         
      |  |    +---------+         
      |  |                        
      |  |                        
      |  |    +---------+         
      +-+|+-->|         |         
         |    | AndGate +--> carry
b +------+--->|         |         
              +---------+         
```

The output type for the circuit is defined as:

```rust
{{#rustdoc_include ../code/src/circuits/kernels.rs:half-adder-outputs}}
```

The circuit itself is 

```rust
{{#rustdoc_include ../code/src/circuits/kernels.rs:half-adder}}
```

And the `CircuitIO` trait is implemented as

```rust
{{#rustdoc_include ../code/src/circuits/kernels.rs:half-adder-io}}
```

For completeness, the `D` and `Q` types are defined explicitly in this case:

```rust
{{#rustdoc_include ../code/src/circuits/kernels.rs:half-adder-d}}
```

and the `Q` type must be defined as

```rust
{{#rustdoc_include ../code/src/circuits/kernels.rs:half-adder-q}}
```

Finally, the `half_adder` kernel is defined as:

```rust
{{#rustdoc_include ../code/src/circuits/kernels.rs:half-adder-kernel}}
```

Note the important things:

- The signature of the kernel is `fn(I, Q) -> (O, D)`.
- The `#[kernel]` attribute is attached to the definition.
- The name of the type and the name of the function are the same: `half_adder`. The type is automatically generated by RHDL.

Details about what subset of Rust is synthesizable are outlined in [Kernels](../kernels/summary.md).